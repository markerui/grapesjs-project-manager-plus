{"version":3,"sources":["webpack://grapesjs-project-manager-plus/webpack/universalModuleDefinition","webpack://grapesjs-project-manager-plus/webpack/bootstrap","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/regenerator/index.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/defineProperty.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/createClass.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/inherits.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/typeof.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/objectWithoutProperties.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/readOnlyError.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://grapesjs-project-manager-plus/./node_modules/dom-to-image/src/dom-to-image.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/toPropertyKey.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/toPrimitive.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/regeneratorRuntime.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://grapesjs-project-manager-plus/./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","webpack://grapesjs-project-manager-plus/./src/utils/timeago.js","webpack://grapesjs-project-manager-plus/./src/utils/ui.js","webpack://grapesjs-project-manager-plus/./src/utils/objsize.js","webpack://grapesjs-project-manager-plus/./src/utils/sort.js","webpack://grapesjs-project-manager-plus/./src/manager/templates.js","webpack://grapesjs-project-manager-plus/./src/manager/pages.js","webpack://grapesjs-project-manager-plus/./src/manager/settings.js","webpack://grapesjs-project-manager-plus/./src/manager/index.js","webpack://grapesjs-project-manager-plus/./src/commands.js","webpack://grapesjs-project-manager-plus/./src/consts.js","webpack://grapesjs-project-manager-plus/./src/storage/indexeddb.js","webpack://grapesjs-project-manager-plus/./src/storage/remote.js","webpack://grapesjs-project-manager-plus/./src/storage/firestore.js","webpack://grapesjs-project-manager-plus/./src/storage/index.js","webpack://grapesjs-project-manager-plus/./src/locale/en.js","webpack://grapesjs-project-manager-plus/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","runtime","regeneratorRuntime","accidentalStrictMode","globalThis","Function","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","fn","self","this","args","arguments","apply","err","undefined","ReferenceError","toPropertyKey","obj","configurable","writable","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","protoProps","staticProps","subClass","superClass","constructor","_typeof","assertThisInitialized","iterator","objectWithoutPropertiesLoose","source","excluded","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","arr","global","util","escape","string","replace","parseExtension","mimeType","url","extension","toLowerCase","WOFF","JPEG","dataAsUrl","content","type","isDataUrl","search","canvasToBlob","canvas","toBlob","binaryString","atob","toDataURL","split","binaryArray","Uint8Array","charCodeAt","Blob","resolveUrl","baseUrl","doc","document","implementation","createHTMLDocument","base","createElement","head","appendChild","a","body","href","getAndEncode","TIMEOUT","domtoimage","impl","options","cacheBust","test","Date","getTime","placeholder","request","XMLHttpRequest","onreadystatechange","readyState","status","fail","encoder","FileReader","onloadend","result","readAsDataURL","response","ontimeout","responseType","timeout","open","send","imagePlaceholder","message","console","uid","index","Math","random","pow","toString","slice","delay","ms","setTimeout","asArray","arrayLike","array","push","escapeXhtml","makeImage","uri","image","Image","onload","onerror","src","width","node","leftBorder","px","rightBorder","scrollWidth","height","topBorder","bottomBorder","scrollHeight","match","exec","styleProperty","getComputedStyle","getPropertyValue","parseFloat","newUtil","inliner","URL_REGEX","inlineAll","shouldProcess","nothingToInline","readUrls","urls","forEach","inline","filter","data","dataUrl","RegExp","urlAsRegex","newInliner","fontFaces","resolveAll","readAll","webFonts","all","map","webFont","cssStrings","join","styleSheets","cssRules","sheet","e","log","rule","CSSRule","FONT_FACE_RULE","style","rules","newWebFont","webFontRule","parentStyleSheet","cssText","newFontFaces","images","Element","background","inlined","setProperty","getPropertyPriority","inlineBackground","HTMLImageElement","newImage","childNodes","child","element","newImages","defaultOptions","toSvg","toPng","draw","toJpeg","quality","toPixelData","getContext","getImageData","copyOptions","cloneNode","HTMLCanvasElement","clone","cloneChildren","original","cloneStyle","clonePseudoElements","copyUserInput","fixSvg","copyProperties","className","styleElement","selector","formatCssText","formatCssProperties","createTextNode","formatPseudoElementStyle","clonePseudoElement","HTMLTextAreaElement","innerHTML","HTMLInputElement","setAttribute","SVGElement","SVGRectElement","attribute","getAttribute","processClone","children","cloneChildrenInOrder","parent","childClone","embedFonts","inlineImages","bgcolor","backgroundColor","keys","XMLSerializer","serializeToString","xhtml","foreignObject","svg","makeSvgDataUri","domNode","ctx","fillStyle","fillRect","newCanvas","drawImage","styleNode","toPrimitive","String","len","arr2","Array","input","hint","prim","res","Number","_regeneratorRuntime","Op","hasOwn","desc","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","makeInvokeMethod","tryCatch","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","values","Gp","defineIteratorMethods","method","_invoke","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","record","__await","unwrapped","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","methodName","resultName","next","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","iter","val","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","_setPrototypeOf","arrayLikeToArray","isArray","from","minLen","sourceKeys","timeago","date","short","ii","second","minute","hour","day","week","month","year","round","dir","pl","v","concat","substring","ts","now","_readOnlyError","UI","editor","opts","_classCallCheck","$","pfx","getConfig","setState","setStateSilent","onRender","handleTabs","_createClass","_objectSpread","update","Storage","getCurrentStorage","Pages","objSizeKiloBytes","objSizeBytes","TextEncoder","encode","JSON","stringify","matchText","text","TemplateManager","_UI","_inherits","_handleDelete","_handleCopy","_handleCreate","_handleOpen","_onRender","_super","_createSuper","_this","handleSort","_assertThisInitialized","handleFilterInput","handleNameInput","handleOpen","handleCreate","handleDelete","openEdit","handleCopy","editableProjectId","projectId","tab","sites","nameText","filterText","loading","sortBy","sortOrder","Modal","onceClose","objSize","_asyncToGenerator","_callee","cs","_context","loadAll","trim","dataset","sort","$el","find","removeClass","addClass","id","_callee2","_context2","currentId","currentPageOpen","setId","load","setName","setThumbnail","thumbnail","setIsTemplate","template","setDescription","description","setGlobalSetting","globalSetting","close","_x","_callee3","_def","_this$state","def","_res","_context3","runCommand","styles","pages","crypto","randomUUID","_defineProperty","store","_x2","currentTarget","SettingsApp","setTab","_callee4","copyId","copyProInfo","_context4","item","confirmCopyProject","_x3","onUpdateAsync","updated_at","_callee5","_context5","confirmDeleteProject","onDeleteAsync","delete","onDelete","_x4","order","_this$state2","loader","nosites","b","sortByName","dateType","timeA","timeB","sortByDate","pagesA","parse","pagesB","sortByPages","sizeA","sizeB","sortBySize","matchingSites","site","created_at","size","_pages","legacyPrefix","time","ago","pageNames","page","I18n","toFixed","renderSiteList","html","css","_this$$el","_this$$el2","_this$$el3","_this$$el4","_this$$el5","_this$$el6","_this$$el7","_this$$el8","_this$$el9","_this$$el10","_this$$el11","_this2","renderSiteTable","renderSiteActions","on","_this$$el12","remove","cont","PagesApp","addPage","selectPage","copyPage","removePage","isSelected","editablePageId","isShowing","pageInfo","title","keywords","pageSetting","pm","_toConsumableArray","getAll","getSelected","select","pageKey","component","getMainComponent","pageName","add","currentPage","set","renderPagesList","Panels","getPanel","_this$findPanel","findPanel","render","trigger","handleSave","handleThumbnail","handleThumbnailInput","renderSettings","editableId","editPage","handleEdit","clb","attr","onThumbnail","nameValue","titleValue","keywordsValue","descriptionValue","pageSettingValue","allSites","cm","Commands","mdl","mdlClass","mdlClassMd","run","sender","mdlDialog","querySelector","classList","setTitle","mdlTitle","setContent","getModel","once","showPanel","hidePanel","uuidv4","getRandomValues","getJpeg","_ref","clbErr","_args","onScreenshotAsync","t0","el","getWrapper","getEl","getStyle","onScreenshotError","_ref2","storageIDB","storageRemote","storageFireStore","helpers","currentName","currentThumbnail","isTemplate","db","sm","StorageManager","storageName","objsName","objectStoreName","getDb","getAsyncDb","indexedDB","mozIndexedDB","webkitIndexedDB","msIndexedDB","dbName","indexeddbVersion","onsuccess","onupgradeneeded","createObjectStore","keyPath","createIndex","unique","getObjectStore","transaction","objectStore","getAsyncObjectStore","objs","put","_data","_objectWithoutProperties","_excluded","_this3","_callee6","_context6","remote","stOpts","getStorageOptions","_arguments","urlLoad","projectData","endsWith","_arguments2","_arguments3","urlStore","uuidInPath","urlDelete","collection","apiKey","authDomain","dbSettings","settings","onError","code","getDoc","getAsyncCollection","firebase","apps","app","firestore","initializeApp","firebaseConfig","enableOffline","enablePersistence","catch","getAsyncDoc","cll","setDocId","_doc","exists","docs","merge","indexeddb","templates","newTemplates","new","help","updated","created","actions","titles","edit","save","generate","labels","placeholders","loadFirst","customLoad","confirm","confirmDeletePage","del","up","shot","$input","nopages","timestampsInSnapshots","i18n","addMessages","en","commands","storage","firstPage","stopCommand","substr"],"mappings":"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","file":"grapesjs-project-manager-plus.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"grapesjs-project-manager-plus\"] = factory();\n\telse\n\t\troot[\"grapesjs-project-manager-plus\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 24);\n","// TODO(Babel 8): Remove this file.\n\nvar runtime = require(\"../helpers/regeneratorRuntime\")();\nmodule.exports = runtime;\n\n// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\nmodule.exports = _asyncToGenerator, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}\nmodule.exports = _assertThisInitialized, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperty(obj, key, value) {\n  key = toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nmodule.exports = _defineProperty, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _getPrototypeOf(o);\n}\nmodule.exports = _getPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var setPrototypeOf = require(\"./setPrototypeOf.js\");\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\nmodule.exports = _inherits, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}\nmodule.exports = _possibleConstructorReturn, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return (module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports), _typeof(obj);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose.js\");\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nmodule.exports = _objectWithoutProperties, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _readOnlyError(name) {\n  throw new TypeError(\"\\\"\" + name + \"\\\" is read-only\");\n}\nmodule.exports = _readOnlyError, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayWithoutHoles = require(\"./arrayWithoutHoles.js\");\nvar iterableToArray = require(\"./iterableToArray.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableSpread = require(\"./nonIterableSpread.js\");\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\nmodule.exports = _toConsumableArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","(function (global) {\n    'use strict';\n\n    var util = newUtil();\n    var inliner = newInliner();\n    var fontFaces = newFontFaces();\n    var images = newImages();\n\n    // Default impl options\n    var defaultOptions = {\n        // Default is to fail on error, no placeholder\n        imagePlaceholder: undefined,\n        // Default cache bust is false, it will use the cache\n        cacheBust: false\n    };\n\n    var domtoimage = {\n        toSvg: toSvg,\n        toPng: toPng,\n        toJpeg: toJpeg,\n        toBlob: toBlob,\n        toPixelData: toPixelData,\n        impl: {\n            fontFaces: fontFaces,\n            images: images,\n            util: util,\n            inliner: inliner,\n            options: {}\n        }\n    };\n\n    if (typeof module !== 'undefined')\n        module.exports = domtoimage;\n    else\n        global.domtoimage = domtoimage;\n\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options\n     * @param {Function} options.filter - Should return true if passed node should be included in the output\n     *          (excluding node means excluding it's children as well). Not called on the root node.\n     * @param {String} options.bgcolor - color for the background, any valid CSS color value.\n     * @param {Number} options.width - width to be applied to node before rendering.\n     * @param {Number} options.height - height to be applied to node before rendering.\n     * @param {Object} options.style - an object whose properties to be copied to node's style before rendering.\n     * @param {Number} options.quality - a Number between 0 and 1 indicating image quality (applicable to JPEG only),\n                defaults to 1.0.\n     * @param {String} options.imagePlaceholder - dataURL to use as a placeholder for failed images, default behaviour is to fail fast on images we can't fetch\n     * @param {Boolean} options.cacheBust - set to true to cache bust by appending the time to the request url\n     * @return {Promise} - A promise that is fulfilled with a SVG image data URL\n     * */\n    function toSvg(node, options) {\n        options = options || {};\n        copyOptions(options);\n        return Promise.resolve(node)\n            .then(function (node) {\n                return cloneNode(node, options.filter, true);\n            })\n            .then(embedFonts)\n            .then(inlineImages)\n            .then(applyOptions)\n            .then(function (clone) {\n                return makeSvgDataUri(clone,\n                    options.width || util.width(node),\n                    options.height || util.height(node)\n                );\n            });\n\n        function applyOptions(clone) {\n            if (options.bgcolor) clone.style.backgroundColor = options.bgcolor;\n\n            if (options.width) clone.style.width = options.width + 'px';\n            if (options.height) clone.style.height = options.height + 'px';\n\n            if (options.style)\n                Object.keys(options.style).forEach(function (property) {\n                    clone.style[property] = options.style[property];\n                });\n\n            return clone;\n        }\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a Uint8Array containing RGBA pixel data.\n     * */\n    function toPixelData(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.getContext('2d').getImageData(\n                    0,\n                    0,\n                    util.width(node),\n                    util.height(node)\n                ).data;\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image data URL\n     * */\n    function toPng(node, options) {\n        return draw(node, options || {})\n            .then(function (canvas) {\n                return canvas.toDataURL();\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a JPEG image data URL\n     * */\n    function toJpeg(node, options) {\n        options = options || {};\n        return draw(node, options)\n            .then(function (canvas) {\n                return canvas.toDataURL('image/jpeg', options.quality || 1.0);\n            });\n    }\n\n    /**\n     * @param {Node} node - The DOM Node object to render\n     * @param {Object} options - Rendering options, @see {@link toSvg}\n     * @return {Promise} - A promise that is fulfilled with a PNG image blob\n     * */\n    function toBlob(node, options) {\n        return draw(node, options || {})\n            .then(util.canvasToBlob);\n    }\n\n    function copyOptions(options) {\n        // Copy options to impl options for use in impl\n        if(typeof(options.imagePlaceholder) === 'undefined') {\n            domtoimage.impl.options.imagePlaceholder = defaultOptions.imagePlaceholder;\n        } else {\n            domtoimage.impl.options.imagePlaceholder = options.imagePlaceholder;\n        }\n\n        if(typeof(options.cacheBust) === 'undefined') {\n            domtoimage.impl.options.cacheBust = defaultOptions.cacheBust;\n        } else {\n            domtoimage.impl.options.cacheBust = options.cacheBust;\n        }\n    }\n\n    function draw(domNode, options) {\n        return toSvg(domNode, options)\n            .then(util.makeImage)\n            .then(util.delay(100))\n            .then(function (image) {\n                var canvas = newCanvas(domNode);\n                canvas.getContext('2d').drawImage(image, 0, 0);\n                return canvas;\n            });\n\n        function newCanvas(domNode) {\n            var canvas = document.createElement('canvas');\n            canvas.width = options.width || util.width(domNode);\n            canvas.height = options.height || util.height(domNode);\n\n            if (options.bgcolor) {\n                var ctx = canvas.getContext('2d');\n                ctx.fillStyle = options.bgcolor;\n                ctx.fillRect(0, 0, canvas.width, canvas.height);\n            }\n\n            return canvas;\n        }\n    }\n\n    function cloneNode(node, filter, root) {\n        if (!root && filter && !filter(node)) return Promise.resolve();\n\n        return Promise.resolve(node)\n            .then(makeNodeCopy)\n            .then(function (clone) {\n                return cloneChildren(node, clone, filter);\n            })\n            .then(function (clone) {\n                return processClone(node, clone);\n            });\n\n        function makeNodeCopy(node) {\n            if (node instanceof HTMLCanvasElement) return util.makeImage(node.toDataURL());\n            return node.cloneNode(false);\n        }\n\n        function cloneChildren(original, clone, filter) {\n            var children = original.childNodes;\n            if (children.length === 0) return Promise.resolve(clone);\n\n            return cloneChildrenInOrder(clone, util.asArray(children), filter)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneChildrenInOrder(parent, children, filter) {\n                var done = Promise.resolve();\n                children.forEach(function (child) {\n                    done = done\n                        .then(function () {\n                            return cloneNode(child, filter);\n                        })\n                        .then(function (childClone) {\n                            if (childClone) parent.appendChild(childClone);\n                        });\n                });\n                return done;\n            }\n        }\n\n        function processClone(original, clone) {\n            if (!(clone instanceof Element)) return clone;\n\n            return Promise.resolve()\n                .then(cloneStyle)\n                .then(clonePseudoElements)\n                .then(copyUserInput)\n                .then(fixSvg)\n                .then(function () {\n                    return clone;\n                });\n\n            function cloneStyle() {\n                copyStyle(window.getComputedStyle(original), clone.style);\n\n                function copyStyle(source, target) {\n                    if (source.cssText) target.cssText = source.cssText;\n                    else copyProperties(source, target);\n\n                    function copyProperties(source, target) {\n                        util.asArray(source).forEach(function (name) {\n                            target.setProperty(\n                                name,\n                                source.getPropertyValue(name),\n                                source.getPropertyPriority(name)\n                            );\n                        });\n                    }\n                }\n            }\n\n            function clonePseudoElements() {\n                [':before', ':after'].forEach(function (element) {\n                    clonePseudoElement(element);\n                });\n\n                function clonePseudoElement(element) {\n                    var style = window.getComputedStyle(original, element);\n                    var content = style.getPropertyValue('content');\n\n                    if (content === '' || content === 'none') return;\n\n                    var className = util.uid();\n                    clone.className = clone.className + ' ' + className;\n                    var styleElement = document.createElement('style');\n                    styleElement.appendChild(formatPseudoElementStyle(className, element, style));\n                    clone.appendChild(styleElement);\n\n                    function formatPseudoElementStyle(className, element, style) {\n                        var selector = '.' + className + ':' + element;\n                        var cssText = style.cssText ? formatCssText(style) : formatCssProperties(style);\n                        return document.createTextNode(selector + '{' + cssText + '}');\n\n                        function formatCssText(style) {\n                            var content = style.getPropertyValue('content');\n                            return style.cssText + ' content: ' + content + ';';\n                        }\n\n                        function formatCssProperties(style) {\n\n                            return util.asArray(style)\n                                .map(formatProperty)\n                                .join('; ') + ';';\n\n                            function formatProperty(name) {\n                                return name + ': ' +\n                                    style.getPropertyValue(name) +\n                                    (style.getPropertyPriority(name) ? ' !important' : '');\n                            }\n                        }\n                    }\n                }\n            }\n\n            function copyUserInput() {\n                if (original instanceof HTMLTextAreaElement) clone.innerHTML = original.value;\n                if (original instanceof HTMLInputElement) clone.setAttribute(\"value\", original.value);\n            }\n\n            function fixSvg() {\n                if (!(clone instanceof SVGElement)) return;\n                clone.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n                if (!(clone instanceof SVGRectElement)) return;\n                ['width', 'height'].forEach(function (attribute) {\n                    var value = clone.getAttribute(attribute);\n                    if (!value) return;\n\n                    clone.style.setProperty(attribute, value);\n                });\n            }\n        }\n    }\n\n    function embedFonts(node) {\n        return fontFaces.resolveAll()\n            .then(function (cssText) {\n                var styleNode = document.createElement('style');\n                node.appendChild(styleNode);\n                styleNode.appendChild(document.createTextNode(cssText));\n                return node;\n            });\n    }\n\n    function inlineImages(node) {\n        return images.inlineAll(node)\n            .then(function () {\n                return node;\n            });\n    }\n\n    function makeSvgDataUri(node, width, height) {\n        return Promise.resolve(node)\n            .then(function (node) {\n                node.setAttribute('xmlns', 'http://www.w3.org/1999/xhtml');\n                return new XMLSerializer().serializeToString(node);\n            })\n            .then(util.escapeXhtml)\n            .then(function (xhtml) {\n                return '<foreignObject x=\"0\" y=\"0\" width=\"100%\" height=\"100%\">' + xhtml + '</foreignObject>';\n            })\n            .then(function (foreignObject) {\n                return '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"' + width + '\" height=\"' + height + '\">' +\n                    foreignObject + '</svg>';\n            })\n            .then(function (svg) {\n                return 'data:image/svg+xml;charset=utf-8,' + svg;\n            });\n    }\n\n    function newUtil() {\n        return {\n            escape: escape,\n            parseExtension: parseExtension,\n            mimeType: mimeType,\n            dataAsUrl: dataAsUrl,\n            isDataUrl: isDataUrl,\n            canvasToBlob: canvasToBlob,\n            resolveUrl: resolveUrl,\n            getAndEncode: getAndEncode,\n            uid: uid(),\n            delay: delay,\n            asArray: asArray,\n            escapeXhtml: escapeXhtml,\n            makeImage: makeImage,\n            width: width,\n            height: height\n        };\n\n        function mimes() {\n            /*\n             * Only WOFF and EOT mime types for fonts are 'real'\n             * see http://www.iana.org/assignments/media-types/media-types.xhtml\n             */\n            var WOFF = 'application/font-woff';\n            var JPEG = 'image/jpeg';\n\n            return {\n                'woff': WOFF,\n                'woff2': WOFF,\n                'ttf': 'application/font-truetype',\n                'eot': 'application/vnd.ms-fontobject',\n                'png': 'image/png',\n                'jpg': JPEG,\n                'jpeg': JPEG,\n                'gif': 'image/gif',\n                'tiff': 'image/tiff',\n                'svg': 'image/svg+xml'\n            };\n        }\n\n        function parseExtension(url) {\n            var match = /\\.([^\\.\\/]*?)$/g.exec(url);\n            if (match) return match[1];\n            else return '';\n        }\n\n        function mimeType(url) {\n            var extension = parseExtension(url).toLowerCase();\n            return mimes()[extension] || '';\n        }\n\n        function isDataUrl(url) {\n            return url.search(/^(data:)/) !== -1;\n        }\n\n        function toBlob(canvas) {\n            return new Promise(function (resolve) {\n                var binaryString = window.atob(canvas.toDataURL().split(',')[1]);\n                var length = binaryString.length;\n                var binaryArray = new Uint8Array(length);\n\n                for (var i = 0; i < length; i++)\n                    binaryArray[i] = binaryString.charCodeAt(i);\n\n                resolve(new Blob([binaryArray], {\n                    type: 'image/png'\n                }));\n            });\n        }\n\n        function canvasToBlob(canvas) {\n            if (canvas.toBlob)\n                return new Promise(function (resolve) {\n                    canvas.toBlob(resolve);\n                });\n\n            return toBlob(canvas);\n        }\n\n        function resolveUrl(url, baseUrl) {\n            var doc = document.implementation.createHTMLDocument();\n            var base = doc.createElement('base');\n            doc.head.appendChild(base);\n            var a = doc.createElement('a');\n            doc.body.appendChild(a);\n            base.href = baseUrl;\n            a.href = url;\n            return a.href;\n        }\n\n        function uid() {\n            var index = 0;\n\n            return function () {\n                return 'u' + fourRandomChars() + index++;\n\n                function fourRandomChars() {\n                    /* see http://stackoverflow.com/a/6248722/2519373 */\n                    return ('0000' + (Math.random() * Math.pow(36, 4) << 0).toString(36)).slice(-4);\n                }\n            };\n        }\n\n        function makeImage(uri) {\n            return new Promise(function (resolve, reject) {\n                var image = new Image();\n                image.onload = function () {\n                    resolve(image);\n                };\n                image.onerror = reject;\n                image.src = uri;\n            });\n        }\n\n        function getAndEncode(url) {\n            var TIMEOUT = 30000;\n            if(domtoimage.impl.options.cacheBust) {\n                // Cache bypass so we dont have CORS issues with cached images\n                // Source: https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n                url += ((/\\?/).test(url) ? \"&\" : \"?\") + (new Date()).getTime();\n            }\n\n            return new Promise(function (resolve) {\n                var request = new XMLHttpRequest();\n\n                request.onreadystatechange = done;\n                request.ontimeout = timeout;\n                request.responseType = 'blob';\n                request.timeout = TIMEOUT;\n                request.open('GET', url, true);\n                request.send();\n\n                var placeholder;\n                if(domtoimage.impl.options.imagePlaceholder) {\n                    var split = domtoimage.impl.options.imagePlaceholder.split(/,/);\n                    if(split && split[1]) {\n                        placeholder = split[1];\n                    }\n                }\n\n                function done() {\n                    if (request.readyState !== 4) return;\n\n                    if (request.status !== 200) {\n                        if(placeholder) {\n                            resolve(placeholder);\n                        } else {\n                            fail('cannot fetch resource: ' + url + ', status: ' + request.status);\n                        }\n\n                        return;\n                    }\n\n                    var encoder = new FileReader();\n                    encoder.onloadend = function () {\n                        var content = encoder.result.split(/,/)[1];\n                        resolve(content);\n                    };\n                    encoder.readAsDataURL(request.response);\n                }\n\n                function timeout() {\n                    if(placeholder) {\n                        resolve(placeholder);\n                    } else {\n                        fail('timeout of ' + TIMEOUT + 'ms occured while fetching resource: ' + url);\n                    }\n                }\n\n                function fail(message) {\n                    console.error(message);\n                    resolve('');\n                }\n            });\n        }\n\n        function dataAsUrl(content, type) {\n            return 'data:' + type + ';base64,' + content;\n        }\n\n        function escape(string) {\n            return string.replace(/([.*+?^${}()|\\[\\]\\/\\\\])/g, '\\\\$1');\n        }\n\n        function delay(ms) {\n            return function (arg) {\n                return new Promise(function (resolve) {\n                    setTimeout(function () {\n                        resolve(arg);\n                    }, ms);\n                });\n            };\n        }\n\n        function asArray(arrayLike) {\n            var array = [];\n            var length = arrayLike.length;\n            for (var i = 0; i < length; i++) array.push(arrayLike[i]);\n            return array;\n        }\n\n        function escapeXhtml(string) {\n            return string.replace(/#/g, '%23').replace(/\\n/g, '%0A');\n        }\n\n        function width(node) {\n            var leftBorder = px(node, 'border-left-width');\n            var rightBorder = px(node, 'border-right-width');\n            return node.scrollWidth + leftBorder + rightBorder;\n        }\n\n        function height(node) {\n            var topBorder = px(node, 'border-top-width');\n            var bottomBorder = px(node, 'border-bottom-width');\n            return node.scrollHeight + topBorder + bottomBorder;\n        }\n\n        function px(node, styleProperty) {\n            var value = window.getComputedStyle(node).getPropertyValue(styleProperty);\n            return parseFloat(value.replace('px', ''));\n        }\n    }\n\n    function newInliner() {\n        var URL_REGEX = /url\\(['\"]?([^'\"]+?)['\"]?\\)/g;\n\n        return {\n            inlineAll: inlineAll,\n            shouldProcess: shouldProcess,\n            impl: {\n                readUrls: readUrls,\n                inline: inline\n            }\n        };\n\n        function shouldProcess(string) {\n            return string.search(URL_REGEX) !== -1;\n        }\n\n        function readUrls(string) {\n            var result = [];\n            var match;\n            while ((match = URL_REGEX.exec(string)) !== null) {\n                result.push(match[1]);\n            }\n            return result.filter(function (url) {\n                return !util.isDataUrl(url);\n            });\n        }\n\n        function inline(string, url, baseUrl, get) {\n            return Promise.resolve(url)\n                .then(function (url) {\n                    return baseUrl ? util.resolveUrl(url, baseUrl) : url;\n                })\n                .then(get || util.getAndEncode)\n                .then(function (data) {\n                    return util.dataAsUrl(data, util.mimeType(url));\n                })\n                .then(function (dataUrl) {\n                    return string.replace(urlAsRegex(url), '$1' + dataUrl + '$3');\n                });\n\n            function urlAsRegex(url) {\n                return new RegExp('(url\\\\([\\'\"]?)(' + util.escape(url) + ')([\\'\"]?\\\\))', 'g');\n            }\n        }\n\n        function inlineAll(string, baseUrl, get) {\n            if (nothingToInline()) return Promise.resolve(string);\n\n            return Promise.resolve(string)\n                .then(readUrls)\n                .then(function (urls) {\n                    var done = Promise.resolve(string);\n                    urls.forEach(function (url) {\n                        done = done.then(function (string) {\n                            return inline(string, url, baseUrl, get);\n                        });\n                    });\n                    return done;\n                });\n\n            function nothingToInline() {\n                return !shouldProcess(string);\n            }\n        }\n    }\n\n    function newFontFaces() {\n        return {\n            resolveAll: resolveAll,\n            impl: {\n                readAll: readAll\n            }\n        };\n\n        function resolveAll() {\n            return readAll(document)\n                .then(function (webFonts) {\n                    return Promise.all(\n                        webFonts.map(function (webFont) {\n                            return webFont.resolve();\n                        })\n                    );\n                })\n                .then(function (cssStrings) {\n                    return cssStrings.join('\\n');\n                });\n        }\n\n        function readAll() {\n            return Promise.resolve(util.asArray(document.styleSheets))\n                .then(getCssRules)\n                .then(selectWebFontRules)\n                .then(function (rules) {\n                    return rules.map(newWebFont);\n                });\n\n            function selectWebFontRules(cssRules) {\n                return cssRules\n                    .filter(function (rule) {\n                        return rule.type === CSSRule.FONT_FACE_RULE;\n                    })\n                    .filter(function (rule) {\n                        return inliner.shouldProcess(rule.style.getPropertyValue('src'));\n                    });\n            }\n\n            function getCssRules(styleSheets) {\n                var cssRules = [];\n                styleSheets.forEach(function (sheet) {\n                    try {\n                        util.asArray(sheet.cssRules || []).forEach(cssRules.push.bind(cssRules));\n                    } catch (e) {\n                        console.log('Error while reading CSS rules from ' + sheet.href, e.toString());\n                    }\n                });\n                return cssRules;\n            }\n\n            function newWebFont(webFontRule) {\n                return {\n                    resolve: function resolve() {\n                        var baseUrl = (webFontRule.parentStyleSheet || {}).href;\n                        return inliner.inlineAll(webFontRule.cssText, baseUrl);\n                    },\n                    src: function () {\n                        return webFontRule.style.getPropertyValue('src');\n                    }\n                };\n            }\n        }\n    }\n\n    function newImages() {\n        return {\n            inlineAll: inlineAll,\n            impl: {\n                newImage: newImage\n            }\n        };\n\n        function newImage(element) {\n            return {\n                inline: inline\n            };\n\n            function inline(get) {\n                if (util.isDataUrl(element.src)) return Promise.resolve();\n\n                return Promise.resolve(element.src)\n                    .then(get || util.getAndEncode)\n                    .then(function (data) {\n                        return util.dataAsUrl(data, util.mimeType(element.src));\n                    })\n                    .then(function (dataUrl) {\n                        return new Promise(function (resolve, reject) {\n                            element.onload = resolve;\n                            element.onerror = reject;\n                            element.src = dataUrl;\n                        });\n                    });\n            }\n        }\n\n        function inlineAll(node) {\n            if (!(node instanceof Element)) return Promise.resolve(node);\n\n            return inlineBackground(node)\n                .then(function () {\n                    if (node instanceof HTMLImageElement)\n                        return newImage(node).inline();\n                    else\n                        return Promise.all(\n                            util.asArray(node.childNodes).map(function (child) {\n                                return inlineAll(child);\n                            })\n                        );\n                });\n\n            function inlineBackground(node) {\n                var background = node.style.getPropertyValue('background');\n\n                if (!background) return Promise.resolve(node);\n\n                return inliner.inlineAll(background)\n                    .then(function (inlined) {\n                        node.style.setProperty(\n                            'background',\n                            inlined,\n                            node.style.getPropertyPriority('background')\n                        );\n                    })\n                    .then(function () {\n                        return node;\n                    });\n            }\n        }\n    }\n})(this);\n","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction _toPropertyKey(arg) {\n  var key = toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nmodule.exports = _toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nmodule.exports = _toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction _regeneratorRuntime() {\n  \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */\n  module.exports = _regeneratorRuntime = function _regeneratorRuntime() {\n    return exports;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  var exports = {},\n    Op = Object.prototype,\n    hasOwn = Op.hasOwnProperty,\n    defineProperty = Object.defineProperty || function (obj, key, desc) {\n      obj[key] = desc.value;\n    },\n    $Symbol = \"function\" == typeof Symbol ? Symbol : {},\n    iteratorSymbol = $Symbol.iterator || \"@@iterator\",\n    asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\",\n    toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n  function define(obj, key, value) {\n    return Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: !0,\n      configurable: !0,\n      writable: !0\n    }), obj[key];\n  }\n  try {\n    define({}, \"\");\n  } catch (err) {\n    define = function define(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator,\n      generator = Object.create(protoGenerator.prototype),\n      context = new Context(tryLocsList || []);\n    return defineProperty(generator, \"_invoke\", {\n      value: makeInvokeMethod(innerFn, self, context)\n    }), generator;\n  }\n  function tryCatch(fn, obj, arg) {\n    try {\n      return {\n        type: \"normal\",\n        arg: fn.call(obj, arg)\n      };\n    } catch (err) {\n      return {\n        type: \"throw\",\n        arg: err\n      };\n    }\n  }\n  exports.wrap = wrap;\n  var ContinueSentinel = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n  var getProto = Object.getPrototypeOf,\n    NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype);\n  var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype);\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function (method) {\n      define(prototype, method, function (arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (\"throw\" !== record.type) {\n        var result = record.arg,\n          value = result.value;\n        return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) {\n          invoke(\"next\", value, resolve, reject);\n        }, function (err) {\n          invoke(\"throw\", err, resolve, reject);\n        }) : PromiseImpl.resolve(value).then(function (unwrapped) {\n          result.value = unwrapped, resolve(result);\n        }, function (error) {\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n      reject(record.arg);\n    }\n    var previousPromise;\n    defineProperty(this, \"_invoke\", {\n      value: function value(method, arg) {\n        function callInvokeWithMethodAndArg() {\n          return new PromiseImpl(function (resolve, reject) {\n            invoke(method, arg, resolve, reject);\n          });\n        }\n        return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();\n      }\n    });\n  }\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = \"suspendedStart\";\n    return function (method, arg) {\n      if (\"executing\" === state) throw new Error(\"Generator is already running\");\n      if (\"completed\" === state) {\n        if (\"throw\" === method) throw arg;\n        return doneResult();\n      }\n      for (context.method = method, context.arg = arg;;) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n        if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) {\n          if (\"suspendedStart\" === state) throw state = \"completed\", context.arg;\n          context.dispatchException(context.arg);\n        } else \"return\" === context.method && context.abrupt(\"return\", context.arg);\n        state = \"executing\";\n        var record = tryCatch(innerFn, self, context);\n        if (\"normal\" === record.type) {\n          if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue;\n          return {\n            value: record.arg,\n            done: context.done\n          };\n        }\n        \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg);\n      }\n    };\n  }\n  function maybeInvokeDelegate(delegate, context) {\n    var methodName = context.method,\n      method = delegate.iterator[methodName];\n    if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel;\n    var record = tryCatch(method, delegate.iterator, context.arg);\n    if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel;\n    var info = record.arg;\n    return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel);\n  }\n  function pushTryEntry(locs) {\n    var entry = {\n      tryLoc: locs[0]\n    };\n    1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry);\n  }\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\", delete record.arg, entry.completion = record;\n  }\n  function Context(tryLocsList) {\n    this.tryEntries = [{\n      tryLoc: \"root\"\n    }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0);\n  }\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) return iteratorMethod.call(iterable);\n      if (\"function\" == typeof iterable.next) return iterable;\n      if (!isNaN(iterable.length)) {\n        var i = -1,\n          next = function next() {\n            for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next;\n            return next.value = undefined, next.done = !0, next;\n          };\n        return next.next = next;\n      }\n    }\n    return {\n      next: doneResult\n    };\n  }\n  function doneResult() {\n    return {\n      value: undefined,\n      done: !0\n    };\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", {\n    value: GeneratorFunctionPrototype,\n    configurable: !0\n  }), defineProperty(GeneratorFunctionPrototype, \"constructor\", {\n    value: GeneratorFunction,\n    configurable: !0\n  }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) {\n    var ctor = \"function\" == typeof genFun && genFun.constructor;\n    return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name));\n  }, exports.mark = function (genFun) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun;\n  }, exports.awrap = function (arg) {\n    return {\n      __await: arg\n    };\n  }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    void 0 === PromiseImpl && (PromiseImpl = Promise);\n    var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl);\n    return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) {\n      return result.done ? result.value : iter.next();\n    });\n  }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () {\n    return this;\n  }), define(Gp, \"toString\", function () {\n    return \"[object Generator]\";\n  }), exports.keys = function (val) {\n    var object = Object(val),\n      keys = [];\n    for (var key in object) keys.push(key);\n    return keys.reverse(), function next() {\n      for (; keys.length;) {\n        var key = keys.pop();\n        if (key in object) return next.value = key, next.done = !1, next;\n      }\n      return next.done = !0, next;\n    };\n  }, exports.values = values, Context.prototype = {\n    constructor: Context,\n    reset: function reset(skipTempReset) {\n      if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined);\n    },\n    stop: function stop() {\n      this.done = !0;\n      var rootRecord = this.tryEntries[0].completion;\n      if (\"throw\" === rootRecord.type) throw rootRecord.arg;\n      return this.rval;\n    },\n    dispatchException: function dispatchException(exception) {\n      if (this.done) throw exception;\n      var context = this;\n      function handle(loc, caught) {\n        return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught;\n      }\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i],\n          record = entry.completion;\n        if (\"root\" === entry.tryLoc) return handle(\"end\");\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\"),\n            hasFinally = hasOwn.call(entry, \"finallyLoc\");\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0);\n          } else {\n            if (!hasFinally) throw new Error(\"try statement without catch or finally\");\n            if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc);\n          }\n        }\n      }\n    },\n    abrupt: function abrupt(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n      finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null);\n      var record = finallyEntry ? finallyEntry.completion : {};\n      return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record);\n    },\n    complete: function complete(record, afterLoc) {\n      if (\"throw\" === record.type) throw record.arg;\n      return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel;\n    },\n    finish: function finish(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel;\n      }\n    },\n    \"catch\": function _catch(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (\"throw\" === record.type) {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n      throw new Error(\"illegal catch attempt\");\n    },\n    delegateYield: function delegateYield(iterable, resultName, nextLoc) {\n      return this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel;\n    }\n  }, exports;\n}\nmodule.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  return _setPrototypeOf(o, p);\n}\nmodule.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\nmodule.exports = _arrayWithoutHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nmodule.exports = _iterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableSpread, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nmodule.exports = _objectWithoutPropertiesLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","export default function timeago(date, short) {\n    const obj = {\n        second: 1000,\n        minute: 60 * 1000,\n        hour: 60 * 1000 * 60,\n        day: 24 * 60 * 1000 * 60,\n        week: 7 * 24 * 60 * 1000 * 60,\n        month: 30 * 24 * 60 * 1000 * 60,\n        year: 365 * 24 * 60 * 1000 * 60,\n    }\n\n    const { round } = Math,\n        dir = ' ago',\n        pl = function (v, n) {\n            return (short === undefined) ? `${n} ${v + (n > 1 ? 's' : '') + dir}` : n + v.substring(0, 1)\n        },\n        ts = Date.now() - new Date(date).getTime();\n    let ii;\n\n    if (ts < 0) {\n        ts *= -1;\n        dir = ' from now';\n    }\n\n    for (var i in obj) {\n        if (round(ts) < obj[i]) return pl(ii || 'm', round(ts / (obj[ii] || 1)))\n        ii = i;\n    }\n    return pl(i, round(ts / obj[i]));\n}","export default class UI {\n    constructor(editor, opts = {}) {\n        this.editor = editor;\n        this.$ = editor.$;\n        this.pfx = editor.getConfig('stylePrefix');\n        this.opts = opts;\n        this.setState = this.setState.bind(this);\n        this.setStateSilent = this.setStateSilent.bind(this);\n        this.onRender = this.onRender.bind(this);\n        this.handleTabs = this.handleTabs.bind(this);\n    }\n\n    setState(state) {\n        this.state = { ...this.state, ...state };\n        this.update();\n    }\n\n    setStateSilent(state) {\n        this.state = { ...this.state, ...state };\n    }\n\n    get sm() {\n        return this.editor.Storage;\n    }\n\n    get cs() {\n        return this.editor.Storage.getCurrentStorage();\n    }\n\n    get pm() {\n        return this.editor.Pages;\n    }\n\n    onRender() { }\n\n    handleTabs() { }\n}","export function objSizeMegaBytes(obj) {\n    return objSizeBytes(obj) / (1024 * 1024);\n}\n\nexport default function objSizeKiloBytes(obj) {\n    return objSizeBytes(obj) / 1024;\n}\n\nexport function objSizeBytes(obj) {\n    return new TextEncoder().encode(JSON.stringify(obj)).length;\n}","// https://github.com/netlify-labs/oauth-example/blob/master/src/utils/sort.js\n// License MIT\nimport objSize from './objsize';\n\nexport function matchText(search, text) {\n    if (!text || !search) {\n        return false\n    }\n    return text.toLowerCase().indexOf(search.toLowerCase()) > -1\n}\n\nexport function sortByDate(dateType, order) {\n    return function (a, b) {\n        const timeA = new Date(a[dateType]).getTime()\n        const timeB = new Date(b[dateType]).getTime()\n        if (order === 'asc') {\n            return timeA - timeB\n        }\n        // default 'desc' descending order\n        return timeB - timeA\n    }\n}\n\nexport function sortByName(key, order) {\n    return function (a, b) {\n        if (order === 'asc') {\n            if (a[key] < b[key]) return -1\n            if (a[key] > b[key]) return 1\n        }\n        if (a[key] > b[key]) return -1\n        if (a[key] < b[key]) return 1\n        return 0\n    }\n}\n\nexport function sortByPages(key, order) {\n    return function (a, b) {\n        const pagesA = JSON.parse(a[key]);\n        const pagesB = JSON.parse(b[key]);\n        if (order === 'desc') {\n            if (pagesA.length < pagesB.length) return -1\n            if (pagesA.length > pagesB.length) return 1\n        }\n        if (pagesA.length > pagesB.length) return -1\n        if (pagesA.length < pagesB.length) return 1\n        return 0\n    }\n}\n\nexport function sortBySize(order) {\n    return function (a, b) {\n        const sizeA = objSize(a);\n        const sizeB = objSize(b);\n        if (order === 'asc') {\n            if (sizeA < sizeB) return -1\n            if (sizeA > sizeB) return 1\n        }\n        if (sizeA > sizeB) return -1\n        if (sizeA < sizeB) return 1\n        return 0\n    }\n}","import ago from '../utils/timeago';\nimport UI from '../utils/ui';\nimport objSize from '../utils/objsize';\nimport { sortByDate, sortByName, sortByPages, sortBySize, matchText } from '../utils/sort';\n\nexport default class TemplateManager extends UI {\n    constructor(editor, opts = {}) {\n        super(editor, opts);\n        this.handleSort = this.handleSort.bind(this);\n        this.handleFilterInput = this.handleFilterInput.bind(this);\n        this.handleNameInput = this.handleNameInput.bind(this);\n        this.handleOpen = this.handleOpen.bind(this);\n        this.handleCreate = this.handleCreate.bind(this);\n        this.handleDelete = this.handleDelete.bind(this);\n        this.openEdit = this.openEdit.bind(this);\n        this.handleCopy = this.handleCopy.bind(this);\n\n        /* Set initial app state */\n        this.state = {\n            editableProjectId: '',\n            projectId: '',\n            tab: 'pages',\n            sites: [],\n            nameText: '',\n            filterText: '',\n            loading: false,\n            sortBy: 'published_at',\n            sortOrder: 'desc'\n        };\n\n        editor.Modal.onceClose(() => {\n            this.state.tab = 'pages'\n        });\n    }\n\n    get editableId() {\n        return this.state.editableProjectId;\n    }\n\n    get allSites() {\n        return this.state.sites;\n    }\n\n    get allSitesSize() {\n        return objSize(this.state.sites);\n    }\n\n    async onRender() {\n        const { setState, cs } = this;\n\n        /* Set request loading state */\n        setState({\n            loading: true\n        });\n\n        /* Fetch sites from storage API */\n        const sites = await cs.loadAll();\n        /* Set sites and turn off loading state */\n        setState({\n            sites,\n            loading: false\n        });\n    }\n\n    handleFilterInput(e) {\n        this.setState({\n            filterText: e.target.value.trim()\n        });\n    }\n\n    handleNameInput(e) {\n        this.setStateSilent({\n            nameText: e.target.value.trim()\n        })\n    }\n\n    handleSort(e) {\n        const { sortOrder } = this.state;\n        if (e.target && e.target.dataset) {\n            this.setState({\n                sortBy: e.target.dataset.sort,\n                // invert sort order\n                sortOrder: sortOrder === 'desc' ? 'asc' : 'desc'\n            });\n        }\n    }\n\n    handleTabs(e) {\n        const { target } = e;\n        const { $el, pfx, $ } = this;\n        $el.find(`.${pfx}tablinks`).removeClass('active');\n        $(target).addClass('active');\n        if (target.id === 'pages') {\n            this.setState({ tab: 'pages' });\n        } else {\n            this.setState({ tab: 'templates' });\n        }\n    }\n\n    async handleOpen(e) {\n        const { editor, cs } = this;\n        const { projectId } = this.state;\n        if (!projectId || projectId === cs.currentId) {\n            this.opts.currentPageOpen()\n            return;\n        }\n        cs.setId(projectId);\n        const res = await editor.load();\n        cs.setName(res.name);\n        cs.setThumbnail(res.thumbnail || '');\n        cs.setIsTemplate(res.template);\n        cs.setDescription(res.description || 'No description');\n        cs.setGlobalSetting(res.globalSetting || '');\n        editor.Modal.close();\n    }\n\n    async handleCreate(e) {\n        const { editor, cs } = this;\n        const { projectId, nameText } = this.state;\n        const id = editor.runCommand('get-uuidv4');\n        const name = nameText || 'New-' + id.substring(0, 8);\n        const def = {\n            id,\n            name,\n            template: false,\n            thumbnail: '',\n            styles: '[]',\n            description: 'No description',\n            globalSetting: '',\n            pages: `[{\"id\": \"${crypto.randomUUID().substring(0, 13)}\", \"name\": \"index\"}]`,\n            styles: '[]',\n            assets: '[]'\n        };\n        if (!projectId) {\n            cs.setId(id);\n            await cs.store(def);\n            cs.setIsTemplate(false);\n            const res = await editor.load();\n            cs.setId(res.id);\n            cs.setName(res.name);\n            cs.setThumbnail(res.thumbnail || '');\n            cs.setDescription(res.description || 'No description');\n            cs.setGlobalSetting(res.globalSetting || '');\n            editor.Modal.close();\n        } else {\n            cs.setId(projectId);\n            cs.setIsTemplate(false);\n            const res = await editor.load();\n            cs.setId(id);\n            cs.setName(name);\n            cs.setThumbnail(res.thumbnail || '');\n            cs.setDescription(res.description || 'No description');\n            cs.setGlobalSetting(res.globalSetting || '');\n            editor.Modal.close();\n        }\n    }\n\n    openEdit(e) {\n        const { editor, setStateSilent } = this;\n        setStateSilent({\n            editableProjectId: e.currentTarget.dataset.id\n        });\n        editor.Modal.close();\n        editor.SettingsApp.setTab('project');\n        editor.runCommand('open-settings');\n    }\n\n    async handleCopy(e){\n        const { cs, setState, opts, state, editor } = this;\n        const copyId = e.currentTarget.dataset.id;\n        const copyProInfo = state.sites.find(item=>item.id === copyId)\n        if (opts.confirmCopyProject()) {\n            console.log(copyProInfo)\n            const id = editor.runCommand('get-uuidv4');\n            const def = {\n                ...copyProInfo,\n                id,\n                name: `${copyProInfo.name}-copy`\n            };\n            cs.setId(id);\n            await cs.store(def);\n            cs.setIsTemplate(false);\n            const res = await editor.load();\n            cs.setId(res.id);\n            cs.setName(res.name);\n            cs.setThumbnail(res.thumbnail || '');\n            cs.setDescription(res.description || 'No description');\n            cs.setGlobalSetting(res.globalSetting || '');\n            const sites = await cs.loadAll();\n            setState({ sites });\n        }\n    }\n\n    handleEdit(data) {\n        this.opts.onUpdateAsync(this.cs.update({ ...data, updated_at: Date.now() }));\n    }\n\n    async handleDelete(e) {\n        const { cs, setState, opts } = this;\n        if (opts.confirmDeleteProject()) {\n            const res = await opts.onDeleteAsync(cs.delete(e.currentTarget.dataset.id));\n            opts.onDelete(res);\n            const sites = await cs.loadAll();\n            setState({ sites });\n        }\n    }\n\n    renderSiteList() {\n        const { sites, tab, filterText, loading, sortBy, sortOrder } = this.state;\n        const { pfx, opts, cs, editor } = this;\n\n        if (loading) return opts.loader || '<div>Loading sites...</div>';\n\n        if (!sites.length) return opts.nosites || '<div style=\"padding: 10px 0;\">No Sites</div>';\n\n        let order\n        if (sortBy === 'id') {\n            order = sortByName(sortBy, sortOrder);\n        } else if (sortBy === 'updated_at' || sortBy === 'created_at') {\n            order = sortByDate(sortBy, sortOrder);\n        } else if (sortBy === 'pages') {\n            order = sortByPages(sortBy, sortOrder);\n        } else if (sortBy === 'size') {\n            order = sortBySize(sortOrder);\n        }\n\n        const sortedSites = sites.sort(order);\n\n        let matchingSites = sortedSites.filter(site => {\n            // No search query. Show all\n            if (!filterText && tab === 'pages') {\n                return true;\n            }\n\n            const { id, name, template } = site;\n            if (\n                (matchText(filterText, id) ||\n                    matchText(filterText, name)) &&\n                tab === 'pages'\n            ) {\n                return true;\n            }\n\n            if (tab === 'templates' && template) {\n                return true;\n            }\n\n            // no match!\n            return false;\n        })\n            .map((site, i) => {\n                const {\n                    id,\n                    name,\n                    description,\n                    thumbnail,\n                    created_at,\n                    updated_at\n                } = site;\n                const size = objSize(site);\n                const _pages = site.pages ? site.pages : (opts.legacyPrefix ? site[`${opts.legacyPrefix}pages`] : []);\n                const pages = typeof _pages === 'string' ? JSON.parse(_pages) : _pages;\n                const time = updated_at ? ago(updated_at) : 'NA';\n                const createdAt = created_at ? ago(created_at) : 'NA';\n                const pageNames = pages.map(page => page.name).join(', ');\n                return `<div \n                    class=\"site-wrapper ${cs.currentId === id ? 'open' : ''}\" \n                    key=\"${i}\" \n                    data-id=\"${id}\" \n                    title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.open')}\">\n                        <div class=\"site-screenshot\">\n                            <img src=\"${thumbnail}\" alt=\"\" />\n                        </div>\n                        <div class=\"site-info\">\n                            <h2>\n                                ${name}\n                            </h2>\n                            <div class=\"site-meta\">\n                                ${description}\n                            </div>\n                        </div>\n                        <div class=\"site-update-time\">${time}</div>\n                        <div class=\"site-pages\">\n                            <div title=\"${pageNames || id}\">\n                                ${pages.length || 1}\n                            </div>\n                        </div>\n                        \n                        ${opts.size ? `<div class=\"site-size\" title=\"${size} KB\">\n                            ${size.toFixed(2)} KB\n                        </div>` : ''}\n                        <div class=\"site-actions\">\n                            <i class=\"${pfx}caret-icon fa fa-copy copy\" title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.edit')}\" data-id=\"${id}\"></i>\n                            <i class=\"${pfx}caret-icon fa fa-hand-pointer-o edit\" title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.edit')}\" data-id=\"${id}\"></i>\n                            ${!(cs.currentId === id) ? `<i class=\"${pfx}caret-icon fa fa-trash-o delete\" title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.delete')}\" data-id=\"${id}\"></i>` : ''}\n                        </div>\n                    </div>`;\n            }).join('\\n');\n            // <div class=\"site-create-time\">${createdAt}</div>\n\n        if (!matchingSites.length) {\n            if (tab === 'templates') return opts.nosites || '<div>No Templates Available.</div>';\n            matchingSites = `<div>\n                    <h3>\n                        No '${filterText}' examples found. Clear your search and try again.\n                    </h3>\n                </div>`;\n        }\n        return matchingSites;\n    }\n\n    renderSiteTable(){\n        const { opts, editor } = this;\n        return this.state.tab === 'pages' ? `\n        <div id=\"site-table\">\n            <div class=\"site-wrapper-header\">\n                <div\n                    class=\"site-screenshot-header header\"\n                    data-sort=\"id\"\n                    title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.info')}\"\n                >\n                    ${editor.I18n.t('grapesjs-project-manager.templates.info')}\n                </div>\n                <div\n                    class=\"site-info header\"\n                    data-sort=\"id\"\n                ></div>\n                <div\n                    class=\"site-update-time header\"\n                    data-sort=\"updated_at\"\n                    title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.updated')}\"\n                >\n                    ${editor.I18n.t('grapesjs-project-manager.templates.updated')}\n                </div>\n                <div\n                    class=\"site-pages header\"\n                    data-sort=\"pages\"\n                    title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.pages')}\"\n                >\n                    ${editor.I18n.t('grapesjs-project-manager.templates.pages')}\n                </div>\n                \n                ${opts.size ? `<div\n                    class=\"site-size header\"\n                    data-sort=\"size\"\n                    title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.size')}\"\n                >\n                    ${editor.I18n.t('grapesjs-project-manager.templates.size')}\n                </div>` : ''}\n                <div\n                    class=\"site-actions header\"\n                    data-sort=\"id\"\n                    title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.actions')}\"\n                >\n                    ${editor.I18n.t('grapesjs-project-manager.templates.actions')}\n                </div>\n            </div>\n            <div id=\"site-list\">\n                ${this.renderSiteList()}\n            </div>\n        </div>` : ''\n\n        // <div\n        //     class=\"site-create-time header\"\n        //     data-sort=\"created_at\"\n        //     title=\"${editor.I18n.t('grapesjs-project-manager.templates.titles.created')}\"\n        // >\n        //     ${editor.I18n.t('grapesjs-project-manager.templates.created')}\n        // </div>\n    }\n\n    renderSiteActions() {\n        const { editor } = this;\n\n        return this.state.tab === 'pages' ?\n            `<div  class=\"flex-row\">\n                <input \n                    class=\"search tm-input\" \n                    placeholder=\"${editor.I18n.t('grapesjs-project-manager.templates.search')}\"\n                />\n                <button id=\"open\" class=\"primary-button\">\n                    ${editor.I18n.t('grapesjs-project-manager.templates.open')}\n                </button>\n            </div>` :\n            `<div class=\"${this.pfx}tip-about ${this.pfx}four-color\">\n                ${editor.I18n.t('grapesjs-project-manager.templates.help')}\n            </div>\n            <div class=\"flex-row\">\n                <input \n                    class=\"name tm-input\" \n                    placeholder=\"${editor.I18n.t('grapesjs-project-manager.templates.new')}\"\n                />\n                <button id=\"create\" class=\"primary-button\">\n                    ${editor.I18n.t('grapesjs-project-manager.templates.create')}\n                </button>\n            </div>`;\n    }\n\n    renderThumbnail(thumbnail, page) {\n        const def = `<img src=\"${thumbnail}\" alt=\"\" />`;\n        if (thumbnail) return def;\n        else if (page.html) return `<svg xmlns=\"http://www.w3.org/2000/svg\" class=\"template-preview\" viewBox=\"0 0 1300 1100\" width=\"99%\" height=\"220\">\n                <foreignObject width=\"100%\" height=\"100%\" style=\"pointer-events:none\">\n                    <div xmlns=\"http://www.w3.org/1999/xhtml\">\n                        ${page.html + '<style scoped>' + page.css + '</style>'}\n                    </div>\n                </foreignObject>\n            </svg>`;\n        return def;\n    }\n\n    update() {\n        this.$el?.find('#site-table').html(this.renderSiteTable());\n        this.$el?.find('#site-list').html(this.renderSiteList());\n        this.$el?.find('#tm-actions').html(this.renderSiteActions());\n        const sites = this.$el?.find('.site-wrapper');\n        const search = this.$el?.find('input.search');\n        const name = this.$el?.find('input.name');\n        this.setStateSilent({ projectId: '' });\n        if (sites) {\n            sites.on('click', e => {\n                sites.removeClass('selected');\n                this.$(e.currentTarget).addClass('selected');\n                this.setStateSilent({ projectId: e.currentTarget.dataset.id });\n            });\n        }\n        if (search) {\n            search.val(this.state.filterText);\n            search.on('change', this.handleFilterInput);\n        }\n        if (name) {\n            name.val(this.state.nameText);\n            name.on('change', this.handleNameInput);\n        }\n        this.$el?.find('#open').on('click', this.handleOpen);\n        this.$el?.find('#create').on('click', this.handleCreate);\n        this.$el?.find('i.edit').on('click', this.openEdit);\n        this.$el?.find('i.copy').on('click', this.handleCopy);\n        this.$el?.find('i.delete').on('click', this.handleDelete);\n    }\n\n    render() {\n        const { $, pfx, editor } = this;\n        const { tab } = this.state\n        // Do stuff on render\n        this.onRender();\n        this.$el?.remove();\n\n        /* Show admin UI */\n        const cont = $(`<div class=\"app\">\n                <div class=\"contents\">\n                    <div class=\"${pfx}tab\">\n                        <button id=\"pages\" class=\"${pfx}tablinks ${tab === 'pages' ? 'active' : ''}\">\n                            ${editor.I18n.t('grapesjs-project-manager.templates.all')}\n                        </button>\n                        <button id=\"templates\" class=\"${pfx}tablinks ${tab === 'templates' ? 'active' : ''}\"\">\n                            ${editor.I18n.t('grapesjs-project-manager.templates.newTemplates')}\n                        </button>\n                    </div>\n                    <div id=\"tm-actions\">\n                        ${this.renderSiteActions()}\n                    </div>\n                    ${this.renderSiteTable()}\n                </div>\n            </div>`);\n        cont.find('.header').on('click', this.handleSort);\n        cont.find('#pages, #templates').on('click', this.handleTabs);\n\n        this.$el = cont;\n        return cont;\n    }\n}","import UI from '../utils/ui';\n\nexport default class PagesApp extends UI {\n    constructor(editor, opts = {}) {\n        super(editor, opts);\n        this.addPage = this.addPage.bind(this);\n        this.selectPage = this.selectPage.bind(this);\n        this.copyPage = this.copyPage.bind(this);\n        this.removePage = this.removePage.bind(this);\n        this.isSelected = this.isSelected.bind(this);\n        // this.handleEditInput = this.handleEditInput.bind(this);\n        this.openEdit = this.openEdit.bind(this);\n\n        /* Set initial app state */\n        this.state = {\n            editablePageId: '',\n            isShowing: true,\n            pageInfo: {\n                name: '',\n                title: '',\n                keywords: '',\n                description: '',\n                pageSetting: ''\n            },\n            pages: [],\n            loading: false\n        };\n    }\n\n    get editableId() {\n        return this.state.editablePageId;\n    }\n\n    onRender() {\n        const { pm, setState, editor } = this;\n        setState({\n            loading: true\n        });\n        setState({\n            pages: [...pm.getAll()]\n        });\n        editor.on('page', () => {\n            setState({\n                pages: [...pm.getAll()]\n            })\n        });\n        setState({\n            loading: false\n        });\n    }\n\n    isSelected(page) {\n        return this.pm.getSelected().id === page.id;\n    }\n\n    selectPage(e) {\n        this.pm.select(e.currentTarget.dataset.key);\n        this.update();\n    }\n\n    copyPage(e) {\n        const pageKey = e.currentTarget.dataset.key\n        const { pm } = this;\n        const page = pm.get(pageKey);\n        const component = page.getMainComponent();\n        const pageName = page.get('name') || pageKey\n        pm.add({\n            name: `${pageName}-copy`,\n            component\n        });\n        this.update();\n    }\n\n    removePage(e) {\n        if (this.opts.confirmDeleteProject()) {\n            this.pm.remove(e.currentTarget.dataset.key);\n            this.update();\n        }\n    }\n\n    openEdit(e) {\n        const { editor } = this;\n        this.setStateSilent({\n            editablePageId: e.currentTarget.dataset.key\n        });\n        editor.Modal.close();\n        editor.SettingsApp.setTab('page');\n        editor.runCommand('open-settings');\n    }\n\n    editPage(id, options) {\n        const { name, title, keywords, description, pageSetting} = options\n        const currentPage = this.pm.get(id);\n        currentPage?.set('name', name);\n        currentPage?.set('title', title);\n        currentPage?.set('keywords', keywords);\n        currentPage?.set('description', description);\n        currentPage?.set('pageSetting', pageSetting);\n        this.update()\n    }\n\n    addPage() {\n        const { pm } = this;\n        const { name } = this.state.pageInfo\n        if (!name) return;\n        pm.add({\n            name,\n            component: ''\n        });\n        this.update();\n    }\n\n    // handleEditInput(e) {\n    //     this.setStateSilent({\n    //         nameText: e.target.value.trim()\n    //     })\n    // }\n\n\n    renderPagesList() {\n        const { pages, loading } = this.state;\n        const { opts, isSelected } = this;\n\n        if (loading) return opts.loader || '<div>Loading pages...</div>';\n\n        return pages.map((page, i) => `<div \n                data-id=\"${i}\" \n                data-key=\"${page.get('private') ? '' : (page.id || page.get('name'))}\"  \n                class=\"page ${isSelected(page) ? 'selected' : ''}\"\n            >\n                <i class=\"fa fa-file-o\" style=\"margin:5px;\"></i>\n                <div class=\"page-title\">${page.get('name') || page.id}</div>\n                <div class=\"page-oper\">\n                    ${page.get('internal') ? '' : `<span class=\"page-edit\" data-key=\"${page.id || page.get('name')}\"><i class=\"fa fa-hand-pointer-o\"></i></span>`}\n                    ${page.get('internal') ? '' : `<span class=\"page-copy\" data-key=\"${page.id || page.get('name')}\"><i class=\"fa fa-copy\"></i></span>`}\n                    ${isSelected(page) || page.get('internal') ? '' : `<span class=\"page-close\" data-key=\"${page.id || page.get('name')}\">&Cross;</span>`}\n                </div>\n            </div>`).join(\"\\n\");\n    }\n\n    update() {\n        this.$el?.find('.pages').html(this.renderPagesList());\n        this.$el?.find('.page').on('click', this.selectPage);\n        this.$el?.find('.page-edit').on('click', this.openEdit);\n        this.$el?.find('.page-copy').on('click', this.copyPage);\n        this.$el?.find('.page-close').on('click', this.removePage);\n    }\n\n    render() {\n        const { $, editor } = this;\n\n        // Do stuff on render\n        this.onRender();\n        this.$el?.remove();\n\n        const cont = $(`<div style=\"display: ${this.state.isShowing ? 'flex' : 'none'};\" class=\"pages-wrp\">\n                <div class=\"pages\">\n                    ${this.renderPagesList()}\n                </div>\n                <div  class=\"flex-row\">\n                    <input \n                        class=\"tm-input sm\" \n                        type=\"text\" \n                        placeholder=\"${editor.I18n.t('grapesjs-project-manager.pages.placeholder')}\" \n                    />\n                </div>\n                <div class=\"add-page\">\n                    ${editor.I18n.t('grapesjs-project-manager.pages.new')}\n                </div>\n            </div>`);\n        cont.find('.add-page').on('click', this.addPage);\n        // cont.find('input').on('change', this.handleEditInput);\n\n        this.$el = cont;\n        return cont;\n    }\n\n    get findPanel() {\n        return this.editor.Panels.getPanel('views-container');\n    }\n\n    showPanel() {\n        this.state.isShowing = true;\n        this.findPanel?.set('appendContent', this.render()).trigger('change:appendContent');\n        this.update();\n    }\n\n    hidePanel() {\n        this.state.isShowing = false;\n        this.render();\n    }\n}","import UI from '../utils/ui';\n\nexport default class SettingsApp extends UI {\n    constructor(editor, opts = {}) {\n        super(editor, opts);\n        this.handleSave = this.handleSave.bind(this);\n        this.handleThumbnail = this.handleThumbnail.bind(this);\n        this.handleThumbnailInput = this.handleThumbnailInput.bind(this);\n\n        /* Set initial app state */\n        this.state = {\n            tab: 'page',\n            loading: false\n        };\n    }\n\n    setTab(tab) {\n        this.state.tab = tab;\n    }\n\n    update() {\n        const { $el } = this;\n        $el?.find('#settings').html(this.renderSettings());\n        $el?.find('#generate').on('click', this.handleThumbnail);\n        $el?.find('input#thumbnail').on('change', this.handleThumbnailInput);\n    }\n\n    onRender() {\n        const { setState } = this;\n        setState({\n            loading: true\n        });\n        //? Setup code here \n        setState({\n            loading: false\n        });\n    }\n\n    handleSave(e) {\n        const { $el, editor } = this;\n        const { tab } = this.state;\n        if (tab === 'page') {\n            const id = editor.PagesApp.editableId;\n            const name = $el?.find('input.name').val().trim();\n            const title = $el?.find('input.title').val().trim();\n            const keywords = $el?.find('textarea.keywords').val().trim();\n            const description = $el?.find('textarea.description').val().trim();\n            const pageSetting = $el?.find('textarea.pageSetting').val().trim();\n            id && editor.PagesApp.editPage(id, {\n                name,\n                title,\n                keywords,\n                description,\n                pageSetting\n            });\n        } else {\n            const id = editor.TemplateManager.editableId;\n            const thumbnail = $el?.find('input.thumbnail').val().trim();\n            const name = $el?.find('input.name').val().trim();\n            const description = $el?.find('input.desc').val().trim();\n            // const template = $el?.find('input.template').get(0).checked;\n            const template = false;\n            const globalSetting = $el?.find('textarea.globalSetting').val().trim();\n            id && editor.TemplateManager.handleEdit({ id, thumbnail, name, description, template, globalSetting });\n        }\n        editor.Modal.close();\n    }\n\n    handleThumbnail(e) {\n        const { editor, $el, opts } = this;\n        editor.runCommand('take-screenshot', {\n            clb(dataUrl) {\n                $el?.find('img').attr('src', dataUrl);\n                opts.onThumbnail(dataUrl, $el?.find('input.thumbnail'));\n            }\n        })\n    }\n\n    handleThumbnailInput(e) {\n        this.$el?.find('img').attr('src', e.target.value.trim());\n    }\n\n    renderSettings() {\n        const { tab, loading } = this.state;\n        const { opts, pfx, pm, editor } = this;\n\n        if (loading) return opts.loader || '<div>Loading settings...</div>';\n\n        if (tab === 'page') {\n            const page = pm.get(editor.PagesApp.editableId);\n            console.log(page)\n            const nameValue = page?.get('name') || page?.id || '';\n            const titleValue = page?.get('title') || '';\n            const keywordsValue = page?.get('keywords') || '';\n            const descriptionValue = page?.get('description') || '';\n            const pageSettingValue = page?.get('pageSetting') || '';\n            return `<label for=\"name\">\n                    ${editor.I18n.t('grapesjs-project-manager.settings.labels.name')}\n                </label>\n                <div class=\"flex-row\">\n                    <input \n                        class=\"name tm-input\" \n                        value=\"${nameValue}\" \n                        placeholder=\"${editor.I18n.t('grapesjs-project-manager.settings.placeholders.name')}\"/>\n                </div>\n                <label for=\"title\">\n                    ${editor.I18n.t('grapesjs-project-manager.settings.labels.title')}\n                </label>\n                <div class=\"flex-row\">\n                    <input \n                        class=\"title tm-input\" \n                        value=\"${titleValue}\" \n                        placeholder=\"${editor.I18n.t('grapesjs-project-manager.settings.placeholders.title')}\"/>\n                </div>\n                <label for=\"keywords\">\n                    ${editor.I18n.t('grapesjs-project-manager.settings.labels.keywords')}\n                </label>\n                <div class=\"flex-row\">\n                    <textarea \n                        class=\"keywords tm-input\" \n                        placeholder=\"${editor.I18n.t('grapesjs-project-manager.settings.placeholders.keywords')}\">${keywordsValue}</textarea>\n                </div>\n                <label for=\"description\">\n                    ${editor.I18n.t('grapesjs-project-manager.settings.labels.description')}\n                </label>\n                <div class=\"flex-row\">\n                    <textarea \n                        class=\"description tm-input\" \n                        placeholder=\"${editor.I18n.t('grapesjs-project-manager.settings.placeholders.description')}\">${descriptionValue}</textarea>\n                </div>\n                <label for=\"pageSetting\">\n                    ${editor.I18n.t('grapesjs-project-manager.settings.labels.pageSetting')}\n                </label>\n                <div class=\"flex-row\">\n                    <textarea \n                        class=\"pageSetting tm-input\" \n                        placeholder=\"${editor.I18n.t('grapesjs-project-manager.settings.placeholders.pageSetting')}\">${pageSettingValue}</textarea>\n                </div>`\n        } else {\n            const clb = site => site.id === editor.TemplateManager.editableId;\n            const site = editor.TemplateManager.allSites.find(clb);\n            return `<div class=\"${pfx}tip-about ${pfx}four-color\">\n                    ${editor.I18n.t('grapesjs-project-manager.settings.help')}\n                </div>\n                <label for=\"thumbnail\">\n                    ${editor.I18n.t('grapesjs-project-manager.settings.labels.thumbnail')}\n                </label>\n                <div class=\"flex-row\">\n                    <input \n                        id=\"thumbnail\" \n                        class=\"thumbnail tm-input\" \n                        value=\"${site?.thumbnail || ''}\" \n                        placeholder=\"${editor.I18n.t('grapesjs-project-manager.settings.placeholders.thumbnail')}\"\n                    />\n                </div>\n                <div class=\"flex-row\" style=\"margin-bottom:15px;\">\n                    <div class=\"site-screenshot\">\n                        <img src=\"${site?.thumbnail || ''}\" alt=\"screenshot\" />\n                    </div>\n                    <button id=\"generate\" class=\"primary-button\">\n                        ${editor.I18n.t('grapesjs-project-manager.settings.generate')}\n                    </button>\n                </div>\n                <label for=\"name\">\n                    ${editor.I18n.t('grapesjs-project-manager.settings.labels.name')}\n                </label>\n                <div class=\"flex-row\">\n                    <input \n                        id=\"name\" \n                        class=\"name tm-input\" \n                        value=\"${site?.name || ''}\" \n                        placeholder=\"${editor.I18n.t('grapesjs-project-manager.settings.placeholders.name')}\"\n                    />\n                </div>\n                <label for=\"desc\">\n                    ${editor.I18n.t('grapesjs-project-manager.settings.labels.description')}\n                </label>\n                <div class=\"flex-row\">\n                    <input \n                        id=\"desc\" \n                        class=\"desc tm-input\" \n                        value=\"${site?.description || ''}\" \n                        placeholder=\"${editor.I18n.t('grapesjs-project-manager.settings.placeholders.description')}\"\n                    />\n                </div>\n                \n                <label for=\"desc\">\n                    ${editor.I18n.t('grapesjs-project-manager.settings.labels.globalSetting')}\n                </label>\n                <div class=\"flex-row\">\n                    <textarea \n                        id=\"desc\" \n                        class=\"globalSetting tm-input\" \n                        placeholder=\"${editor.I18n.t('grapesjs-project-manager.settings.placeholders.globalSetting')}\"\n                    >${site?.globalSetting || ''}</textarea>\n                </div>`\n        }\n    }\n\n    // <div class=\"flex-row group\">\n//                 <input id=\"template\" class=\"template\" type=\"checkbox\" ${site?.template ? 'checked' : ''}/>\n//                 <label for=\"template\">\n//                     ${editor.I18n.t('grapesjs-project-manager.settings.labels.template')}\n//                 </label>\n//             </div>\n\n    render() {\n        const { $, editor } = this;\n\n        // Do stuff on render\n        this.onRender();\n        this.$el?.remove();\n\n        const cont = $(`<div class=\"app\">\n                <div id=\"settings\">\n                    ${this.renderSettings()}\n                </div>\n                <div class=\"flex-row\">\n                    <button id=\"save\" class=\"primary-button\">\n                        ${editor.I18n.t('grapesjs-project-manager.settings.save')}\n                    </button>\n                </div>\n            </div>`);\n        cont.find('#save').on('click', this.handleSave);\n        cont.find('#generate').on('click', this.handleThumbnail);\n        cont.find('input#thumbnail').on('change', this.handleThumbnailInput);\n\n        this.$el = cont;\n        return cont;\n    }\n}","import TemplateManager from \"./templates\";\nimport PagesApp from \"./pages\";\nimport SettingsApp from \"./settings\";\n\nexport default TemplateManager;\nexport { TemplateManager, PagesApp, SettingsApp };","import domtoimage from 'dom-to-image';\n\nexport default (editor, opts = {}) => {\n    const cm = editor.Commands;\n    const cs = editor.Storage.getCurrentStorage();\n    const mdl = editor.Modal;\n    const pfx = editor.getConfig('stylePrefix');\n    const mdlClass = `${pfx}mdl-dialog-tml`;\n    const mdlClassMd = `${pfx}mdl-dialog-md`;\n\n    editor.domtoimage = domtoimage;\n\n    cm.add('open-templates', {\n        run(editor, sender) {\n            const mdlDialog = document.querySelector(`.${pfx}mdl-dialog`);\n            mdlDialog.classList.add(mdlClass);\n            sender?.set && sender.set('active');\n            mdl.setTitle(opts.mdlTitle);\n            mdl.setContent(editor.TemplateManager.render());\n            mdl.open();\n            mdl.getModel().once('change:open', () => {\n                mdlDialog.classList.remove(mdlClass);\n            });\n        }\n    });\n\n    cm.add('open-settings', {\n        run(editor, sender) {\n            const mdlDialog = document.querySelector(`.${pfx}mdl-dialog`);\n            mdlDialog.classList.add(mdlClassMd);\n            sender?.set && sender.set('active');\n            mdl.setTitle(opts.mdlTitle);\n            mdl.setContent(editor.SettingsApp.render());\n            mdl.open();\n            mdl.getModel().once('change:open', () => {\n                mdlDialog.classList.remove(mdlClassMd);\n            });\n        }\n    });\n\n    cm.add('open-pages', {\n        run(editor) {\n            editor.PagesApp.showPanel();\n        },\n        stop(editor) {\n            editor.PagesApp.hidePanel();\n        }\n    })\n\n    //some magic from gist.github.com/jed/982883\n    const uuidv4 = () => ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n    );\n\n    const getJpeg = async (node, options = {}, clb, clbErr) => {\n        try {\n            const dataUrl = await opts.onScreenshotAsync(domtoimage.toJpeg(node, options));\n            clb && clb(dataUrl);\n        } catch (err) {\n            clbErr && clbErr(err)\n        }\n    };\n\n    cm.add('get-uuidv4', () => {\n        if (crypto) {\n            return crypto.randomUUID ? crypto.randomUUID() : uuidv4();\n        }\n    });\n\n    cm.add('take-screenshot', (editor, s, options = { clb(d) { return d } }) => {\n        const el = editor.getWrapper().getEl();\n        getJpeg(el, {\n            quality: opts.quality,\n            height: 1000,\n            'cacheBust': true,\n            style: {\n                'background-color': 'white',\n                ...editor.getWrapper().getStyle()\n            },\n        }, options.clb, opts.onScreenshotError);\n    });\n\n    cm.add('save-as-template', editor => {\n        cs.setIsTemplate(true);\n        editor.store();\n    });\n\n    cm.add('delete-template', async (editor) => {\n        const res = await cs.delete();\n        opts.onDelete(res);\n    });\n}","export const storageIDB = 'indexeddb',\n    storageRemote = 'rest-api',\n    storageFireStore = 'firestore',\n    helpers = {\n        currentName: 'Default',\n        currentId: 'uuidv4',\n        currentThumbnail: '',\n        isTemplate: false,\n        description: 'No description',\n        globalSetting: '',\n\n        setId(id) {\n            this.currentId = id;\n        },\n\n        setName(name) {\n            this.currentName = name;\n        },\n\n        setThumbnail(thumbnail) {\n            this.currentThumbnail = thumbnail;\n        },\n\n        setGlobalSetting(globalSetting) {\n            this.globalSetting = globalSetting;\n        },\n\n        setIsTemplate(isTemplate) {\n            this.isTemplate = !!isTemplate;\n        },\n\n        setDescription(description) {\n            this.description = description;\n        },\n    };","import { storageIDB, helpers } from '../consts';\n\nexport default (editor, opts = {}) => {\n    let db;\n    const sm = editor.StorageManager;\n    const storageName = storageIDB;\n    const objsName = opts.objectStoreName;\n\n    // Functions for DB retrieving\n    const getDb = () => db;\n    const getAsyncDb = () => new Promise((resolve, reject) => {\n        if (db) {\n            resolve(db);\n        } else {\n            const indexedDB = window.indexedDB || window.mozIndexedDB ||\n                window.webkitIndexedDB || window.msIndexedDB;\n            const request = indexedDB.open(opts.dbName, opts.indexeddbVersion);\n            request.onerror = reject;\n            request.onsuccess = () => {\n                db = request.result;\n                db.onerror = reject;\n                resolve(db);\n            };\n            request.onupgradeneeded = e => {\n                const objs = request.result.createObjectStore(objsName, { keyPath: 'id' });\n                objs.createIndex('name', 'name', { unique: false });\n            };\n        }\n    });\n\n    // Functions for object store retrieving\n    const getObjectStore = () => {\n        return db.transaction([objsName], 'readwrite').objectStore(objsName);\n    };\n    const getAsyncObjectStore = async () => {\n        if (db) {\n            return getObjectStore();\n        } else {\n            await getAsyncDb();\n            return getObjectStore();\n        }\n    };\n\n    // Add custom storage to the editor\n    sm.add(storageName, {\n        ...helpers,\n        getDb,\n\n        getObjectStore,\n\n        async load(keys) {\n            const objs = await getAsyncObjectStore();\n            return new Promise(\n                (resolve, reject) => {\n                    const request = objs.get(this.currentId);\n                    request.onerror = reject;\n                    request.onsuccess = () => {\n                        resolve(request.result || {});\n                    };\n                }\n            );\n        },\n\n        async loadAll() {\n            const objs = await getAsyncObjectStore();\n            return new Promise(\n                (resolve, reject) => {\n                    const request = objs.getAll();\n                    request.onerror = reject;\n                    request.onsuccess = () => {\n                        resolve(request.result || []);\n                    };\n                }\n            );\n        },\n\n        async store(data) {\n            const objs = await getAsyncObjectStore();\n            return new Promise(\n                (resolve, reject) => {\n                    const request = objs.put({\n                        id: this.currentId,\n                        name: this.currentName,\n                        template: this.isTemplate,\n                        thumbnail: this.currentThumbnail,\n                        description: this.description,\n                        globalSetting: this.globalSetting,\n                        updated_at: Date.now(),\n                        ...data\n                    });\n                    request.onerror = reject;\n                    request.onsuccess = () => {\n                        resolve(request.result);\n                    };\n                }\n            );\n        },\n\n        async update(data) {\n            const { id, ..._data } = data;\n            const objs = await getAsyncObjectStore();\n            return new Promise(\n                (resolve, reject) => {\n                    const request = objs.get(id);\n                    request.onerror = reject;\n                    request.onsuccess = () => {\n                        objs.put({ id, ...request.result, ..._data });\n                        resolve(request.result);\n                    };\n                }\n            );\n        },\n\n        async delete(index) {\n            const objs = await getAsyncObjectStore();\n            return new Promise(\n                (resolve, reject) => {\n                    const request = objs.delete(index || this.currentId);\n                    request.onerror = reject;\n                    request.onsuccess = () => {\n                        resolve(request.result);\n                    };;\n                }\n            );\n        }\n    });\n}","import { storageRemote, helpers } from '../consts';\n\nexport default (editor, opts = {}) => {\n    const sm = editor.StorageManager;\n    const storageName = storageRemote;\n    const remote = sm.get('remote');\n    const stOpts = sm.getStorageOptions('remote');\n\n    // Add custom storage to the editor\n    sm.add(storageName, {\n        ...helpers,\n\n        async load(keys = {}) {\n            const { urlLoad } = stOpts;\n            const id = urlLoad.endsWith('/') ? this.currentId : `/${this.currentId}`;\n            const projectData = await remote.load({\n                ...stOpts,\n                ...{ urlLoad: urlLoad + id },\n                ...keys\n            });\n            return projectData;\n        },\n\n        async loadAll(keys = {}) {\n            return await remote.load({ ...stOpts, ...keys });\n        },\n\n        async store(data, keys = {}) {\n            const { urlStore } = stOpts;\n            const id = urlStore.endsWith('/') ? this.currentId : `/${this.currentId}`;\n            const projectData = await remote.store({\n                id: this.currentId,\n                name: this.currentName,\n                template: this.isTemplate,\n                thumbnail: this.currentThumbnail,\n                description: this.description,\n                globalSetting: this.globalSetting,\n                updated_at: Date.now(),\n                ...data\n            }, {\n                ...stOpts,\n                ...{ urlStore: opts.uuidInPath ? urlStore + id : urlStore },\n                ...keys\n            });\n            return projectData;\n        },\n\n        async update(data) {\n            const { urlStore } = stOpts;\n            let { id } = data;\n            id = urlStore.endsWith('/') ? id : `/${id}`;\n            const projectData = await remote.store(data, {\n                ...stOpts,\n                ...{ urlStore: urlStore + id },\n                ...keys\n            });\n            return projectData;\n        },\n\n        async delete(index) {\n            const { urlDelete } = stOpts;\n            let id = index || this.currentId;\n            id = urlDelete.endsWith('/') ? id : `/${id}`;\n            const res = await remote.request(urlDelete + id, { method: 'delete' });\n            return res;\n        }\n    });\n}","import { storageFireStore, helpers } from '../consts';\n\nexport default (editor, opts = {}) => {\n    const sm = editor.StorageManager;\n    const storageName = storageFireStore;\n\n    let db;\n    let doc;\n    let collection;\n    const { apiKey, authDomain, projectId } = opts;\n    const dbSettings = opts.settings;\n    const onError = err => sm.onError(storageName, err.code || err);\n\n    const getDoc = () => doc;\n\n    const getAsyncCollection = () => {\n        if (collection) return collection;\n        if (!firebase.apps.length) {\n            firebase.initializeApp({ apiKey, authDomain, projectId, ...opts.firebaseConfig });\n            db = firebase.firestore();\n            db.settings(dbSettings);\n        }\n        else {\n            firebase.app();\n            db = firebase.firestore();\n            db.settings(dbSettings);\n        }\n\n        if (opts.enableOffline) {\n            db.enablePersistence().catch(onError);\n        }\n\n        collection = db.collection(opts.objectStoreName);\n        return collection;\n    };\n\n    const getAsyncDoc = () => {\n        const cll = getAsyncCollection();\n        const cs = editor.Storage.getCurrentStorage();\n        doc = cll.doc(cs.currentId);\n        return doc;\n    };\n\n    sm.add(storageName, {\n        ...helpers,\n        getDoc,\n\n        setDocId(id) {\n            this.currentId = id;\n        },\n\n        async load(keys) {\n            const _doc = getAsyncDoc();\n            const doc = await _doc.get();\n            return doc.exists ? doc.data() : {};\n        },\n\n        async loadAll() {\n            const cll = getAsyncCollection();\n            const docs = await cll.get();\n            const data = [];\n            docs.forEach(doc => data.push(doc.data()));\n            return data;\n        },\n\n        async store(data) {\n            const cll = getAsyncCollection();\n            await cll.doc(data.id || this.currentId).set({\n                id: this.currentId,\n                name: this.currentName,\n                template: this.isTemplate,\n                thumbnail: this.currentThumbnail,\n                description: this.description,\n                globalSetting: this.globalSetting,\n                updated_at: Date.now(),\n                ...data\n            });\n        },\n\n        async update(data) {\n            const { id, ..._data } = data;\n            const cll = getAsyncCollection();\n            await cll.doc(id).set(_data, { merge: true });\n        },\n\n        async delete(index) {\n            if (!index) {\n                const _doc = getAsyncDoc();\n                await _doc.delete();\n            } else {\n                const cll = getAsyncCollection();\n                await cll.doc(index).delete();\n            }\n        }\n    });\n}","import indexeddb from './indexeddb';\nimport remote from './remote';\nimport firestore from './firestore';\n\nexport default (editor, opts = {}) => {\n    // Load indexeddb storage\n    indexeddb(editor, opts);\n\n    // Load remote storage\n    remote(editor, opts);\n\n    // Load firestore storage\n    firestore(editor, opts);\n}","export default {\n    'grapesjs-project-manager': {\n        templates: {\n            all: 'All',\n            newTemplates: 'New Site',\n            search: 'Search for sites by name or id',\n            open: 'Open',\n            new: 'Enter new site name',\n            create: 'Create',\n            help: 'Select a site, enter project name, then click create. If no site is selected a blank project will be created.',\n            info: 'Site Info',\n            updated: 'Last Updated',\n            pages: 'Pages',\n            created: 'Created At',\n            size: 'Size',\n            actions: 'Actions',\n            titles: {\n                open: 'Select to open site',\n                info: 'Click to sort by site name',\n                updated: 'Click to sort by last update date',\n                pages: 'Click to sort by number of pages',\n                created: 'Click to sort by site creation date',\n                size: 'Click to sort by site size',\n                actions: 'Click to sort by site name',\n                delete: 'Delete',\n                edit: 'Edit',\n            }\n        },\n        pages: {\n            placeholder: 'page name',\n            new: 'New Page +',\n        },\n        settings: {\n            save: 'Save',\n            generate: 'Generate',\n            help: 'Enter url, or generate thumbnail.',\n            labels: {\n                name: 'Name',\n                thumbnail: 'Thumbnail',\n                description: 'Description',\n                template: 'Template',\n                keywords: 'Keywords',\n                title: 'Title',\n                pageSetting: 'Page Setting',\n                globalSetting: 'Global Setting'\n            },\n            placeholders: {\n                name: 'Name...',\n                thumbnail: 'Thumbnail...',\n                description: 'Description...',\n                keywords: 'Keywords...',\n                title: 'Title...',\n                pageSetting: 'Page Setting...',\n                globalSetting: 'Global Setting...'\n            },\n        },\n    }\n}","import TemplateManager, { PagesApp, SettingsApp } from './manager';\nimport commands from './commands';\nimport storage from './storage';\nimport en from './locale/en';\n\nexport default (editor, opts = {}) => {\n    const options = {\n        ...{\n            // default options\n            // Allow migration of projects using deprecated storage prefix\n            legacyPrefix: '',\n            // Database name\n            dbName: 'gjs',\n\n            // Collection name\n            objectStoreName: 'projects',\n\n            // Load first template in storage\n            loadFirst: true,\n\n            // Custom load\n            customLoad: false,\n\n            // Add uuid as path parameter to store path for rest-api\n            uuidInPath: true,\n\n            // Indexeddb version schema\n            indexeddbVersion: 6,\n\n            // Confirm delete project\n            confirmDeleteProject() {\n                return confirm('Are you sure to delete this project')\n            },\n\n            // Confirm copy project\n            confirmCopyProject() {\n                return confirm('Are you sure copy this project')\n            },\n\n            // Confirm delete page\n            confirmDeletePage() {\n                return confirm('Are you sure to delete this page')\n            },\n\n            // When template or page is deleted\n            onDelete(res) {\n                console.log('Deleted:', res)\n            },\n\n            // Handle promise from delete\n            onDeleteAsync(del) {\n                return del;\n            },\n\n            // Handle promise from update\n            onUpdateAsync(up) {\n                return up;\n            },\n\n            // Handle promise from screenshot\n            onScreenshotAsync(shot) {\n                return shot;\n            },\n\n            // On screenshot error\n            onScreenshotError(err) {\n                console.log(err)\n            },\n\n            // Handle built-in thumbnail generation\n            // By default it just sets the url as the base64 encoded image which may be too large to store in a database\n            // You might want to upload this somewhere\n            onThumbnail(dataUrl, $input) {\n                $input.val(dataUrl);\n            },\n\n            // Quality of screenshot image from 0 to 1, more quality increases the image size\n            quality: .01,\n\n            // Content for templates modal title\n            mdlTitle: 'Project Manager',\n\n            // Show when no pages yet pages\n            nopages: '<div style=\"display:flex;align-items:center;padding:50px;margin:auto;\">No Projects Yet</div>',\n\n            // Firebase API key\n            apiKey: '',\n\n            // Firebase Auth domain\n            authDomain: '',\n\n            // Cloud Firestore project ID\n            projectId: '',\n\n            // Enable support for offline data persistence\n            enableOffline: true,\n\n            // Firebase app config\n            firebaseConfig: {},\n\n            // Database settings (https://firebase.google.com/docs/reference/js/firebase.firestore.Settings)\n            settings: { timestampsInSnapshots: true },\n\n            // Show estimated project statistics\n            size: false,\n\n            // Send feedback when open is clicked on current page\n            currentPageOpen() {\n                console.log('Current page already open')\n            },\n\n            i18n: {},\n        },\n        ...opts,\n    };\n\n    editor.I18n.addMessages({\n        en,\n        ...options.i18n,\n    });\n\n    // Init and add dashboard object to editor\n    editor.TemplateManager = new TemplateManager(editor, options);\n    editor.PagesApp = new PagesApp(editor, options);\n    editor.SettingsApp = new SettingsApp(editor, options);\n\n    // Load commands\n    commands(editor, options);\n\n    // Load storages\n    storage(editor, options);\n\n    // Load page with index zero\n    editor.on('load', async () => {\n        const cs = editor.Storage.getCurrentStorage();\n        const { customLoad } = options;\n        customLoad && typeof customLoad === 'function' && customLoad(editor, cs);\n        if (!customLoad) {\n            const res = await cs.loadAll();\n            const firstPage = res[0];\n            if (firstPage && options.loadFirst) {\n                cs.setId(firstPage.id);\n                cs.setName(firstPage.name);\n                cs.setThumbnail(firstPage.thumbnail);\n                cs.setIsTemplate(firstPage.template);\n                cs.setDescription(firstPage.description || '');\n                cs.setGlobalSetting(firstPage.globalSetting || '');\n                await editor.load();\n                editor.stopCommand('sw-visibility');\n                editor.runCommand('sw-visibility');\n            } else {\n                cs.setId(editor.runCommand('get-uuidv4'));\n                cs.setName(`Default-${cs.currentId.substr(0, 7)}`);\n            }\n        }\n    });\n};"],"sourceRoot":""}